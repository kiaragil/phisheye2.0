<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <title>TLDSF Ordering Portal</title>
    <link rel="stylesheet" href="css/general.css" />
    <link rel="stylesheet" href="css/form.css" />
    <link rel="stylesheet" href="css/mobile.css" />
    <link rel="stylesheet" href="css/cloud.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/css/intlTelInput.min.css"
    />
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAUT3eUyJj4huaLXZrqQnB3XrFSDvwf80Y&libraries=places"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/intlTelInput.min.js"></script>
    <script src="js/poscript.js"></script>
  </head>

  <body>
    <script>
      window.addEventListener("DOMContentLoaded", function () {
        const yourForm = document.getElementById("myForm");
        const submitButton = document.getElementById("submitButton");

        yourForm.addEventListener("submit", function (e) {
          e.preventDefault();

          // Change button text and disable it
          submitButton.textContent = "Sending...";
          submitButton.disabled = true;

          const data = new FormData(yourForm);
          const action = e.target.action;

          fetch(action, {
            method: "POST",
            body: data,
          })
            .then(() => {
              window.location.replace("thankyou");
            })
            .catch(() => {
              // Handle the error (e.g., show an error message)
              submitButton.textContent = "Send";
              submitButton.disabled = false;
            });
        });
      });
    </script>

    <div class="background">
      <div class="cloud cloud1"></div>
      <div class="cloud cloud2"></div>
      <div class="cloud cloud3"></div>
    </div>

    <div class="title">ORDER "TO LIVE AND DIE IN SF"</div>
    <div class="subtitle">
      <p>
        $30.00 (USD) + shipping. 72pp. 80lb satin pages. 100lb matte
        cover.
      </p>
    </div>

    <div class="container">
      <div class="image-container">
        <img src="media/cover.jpg" alt="Book Cover" />
      </div>

      <form
        method="POST"
        action="https://script.google.com/macros/s/AKfycbzf1HzLtv0eQOHrW9OjP-R0ATYokBj605M9145iW9W4aY4Y8GrOQ9lYJKc10SppPVAf/exec"
        id="myForm"
      >
        <label for="Name">Name:</label>
        <input
          name="Name"
          type="text"
          placeholder="chappell roan"
          required
          aria-label="Name"
        />

        <label for="Email">Email:</label>
        <input
          name="Email"
          type="email"
          placeholder="hottogo@example.com"
          required
          aria-label="Email"
        />

        <label for="PhoneNumber">Phone Number:</label>
        <input
          style="margin-bottom: 10px"
          name="PhoneNumber"
          id="PhoneNumber"
          type="tel"
          aria-label="Phone Number"
        />

        <label for="PaymentType">Payment Type:</label>
        <select
          name="PaymentType"
          id="PaymentType"
          required
          onchange="togglePaymentField()"
          aria-label="Payment Type"
        >
          <option value="" disabled selected hidden>Choose Option...</option>
          <option value="cash">Cash</option>
          <option value="paypal">Paypal</option>
          <option value="cashapp">CashApp</option>
          <option value="venmo">Venmo</option>
          <option value="applecash">Apple Cash</option>
          <option value="zelle">Zelle</option>
        </select>

        <div id="paymentField" style="display: none">
          <label id="paymentUsernameLabel" for="PaymentUsername"
            >Payment Username:</label
          >
          <input
            name="PaymentUsername"
            type="text"
            placeholder=""
            id="PaymentUsername"
            aria-label="Payment Username"
          />
          <div id="formNote">
            A payment request will be sent to you. Please complete the payment
            within 2 days.
          </div>
        </div>

        <div id="shippingAddressField">
          <label for="ShippingAddress">Shipping Address:</label>
          <input
            name="Address"
            type="text"
            id="shippingAddressInput"
            placeholder="Enter your address..."
            aria-label="Shipping Address"
          />
        </div>

        <label for="Note">Note:</label>
        <textarea
          name="Note"
          id="Note"
          placeholder="Add a note... (optional)"
          aria-label="Note"
        ></textarea>

        <button type="submit" id="submitButton">Send</button>
      </form>
    </div>

    <script>
      // Initialize intl-tel-input
      document.addEventListener("DOMContentLoaded", function () {
        var phoneNumberInput = document.getElementById("PhoneNumber");
        var iti = window.intlTelInput(phoneNumberInput, {
          separateDialCode: true,
          preferredCountries: ["us", "gb"],
          utilsScript:
            "https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/utils.js",
        });

        // phoneNumberInput.addEventListener("input", function (event) {
        //   var input = event.target.value.replace(/\D/g, "").substring(0, 10);
        //   var areaCode = input.substring(0, 3);
        //   var middle = input.substring(3, 6);
        //   var last = input.substring(6, 10);

        //   if (input.length > 6) {
        //     event.target.value = `(${areaCode}) ${middle}-${last}`;
        //   } else if (input.length > 3) {
        //     event.target.value = `(${areaCode}) ${middle}`;
        //   } else if (input.length > 0) {
        //     event.target.value = `(${areaCode}`;
        //   }
        // });
      });
    </script>
  </body>
</html>
